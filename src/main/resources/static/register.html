
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Register - Property CRM</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    .hidden {
      display: none;
    }


  @-webkit-keyframes spin {
    0% { -webkit-transform: rotate(0deg); }
    100% { -webkit-transform: rotate(360deg); }
  }

  @keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

    /* Custom Input Styles */
    input {
      transition: all 0.3s ease;
    }
    input:focus {
      border-color: #a855f7; /* Purple color on focus */
      box-shadow: 0 0 5px rgba(168, 85, 247, 0.5); /* Glow effect */
    }
  </style>
</head>
<body class="bg-gradient-to-r from-purple-500 to-indigo-500 min-h-screen flex items-center justify-center">

<!-- Spinner Overlay -->
<div id="spinner" class="fixed inset-0 flex items-center justify-center bg-white bg-opacity-75 hidden">
  <div class="loader border-t-4 border-purple-600 rounded-full w-16 h-16 animate-spin"></div>
</div>

<!-- Main Content -->
<div id="main-content" class="bg-white shadow-md rounded-lg p-8 max-w-lg w-full transition duration-300 transform hover:scale-105">
  <h2 class="text-2xl font-bold text-gray-800 text-center mb-2">Create Your Account</h2>

  <form id="registrationForm">
    <div class="mb-4">
      <label for="username" class="block text-gray-700 font-bold mb-2">Username</label>
      <input type="text" id="username" class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600" placeholder="Enter your Username" required>
    </div>

    <div class="mb-4">
      <label for="email" class="block text-gray-700 font-bold mb-2">Email</label>
      <input type="email" id="email" class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600" placeholder="Enter your email" required>
    </div>

    <div class="mb-4">
      <label for="password" class="block text-gray-700 font-bold mb-2">Password</label>
      <input type="password" id="password" class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600" placeholder="Create a password" required>
    </div>

    <div class="mb-6">
      <label for="confirm_password" class="block text-gray-700 font-bold mb-2">Confirm Password</label>
      <input type="password" id="confirm_password" class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600" placeholder="Confirm your password" required>
    </div>

    <button type="submit" class="bg-gradient-to-r from-purple-500 to-indigo-500 text-white font-bold py-2 w-full rounded-lg hover:from-purple-600 hover:to-indigo-600 transition-colors duration-300 transform hover:scale-105">
      Register
    </button>

    <!-- OR divider -->

    <!-- Google Login Button -->

  </form>

  <!-- Notification Area -->
  <div id="notification" class="hidden mt-4 p-4 rounded-lg" role="alert"></div>

  <p class="text-center text-gray-600 mt-6">
    Already have an account? <a href="login.html" class="text-purple-600 hover:underline">Login</a>
  </p>

</div>



  <script>

    // Show spinner and hide the main content
        function showSpinner() {
            document.getElementById('spinner').classList.remove('hidden');
            document.getElementById('main-content').classList.add('hidden');
        }

        // Hide spinner and show the main content
        function hideSpinner() {
            document.getElementById('spinner').classList.add('hidden');
            document.getElementById('main-content').classList.remove('hidden');
        }

        showSpinner();
        // Set a timeout to hide the spinner after 1 second
        setTimeout(hideSpinner, 1000);
    document.getElementById('registrationForm').addEventListener('submit', function(event) {
      event.preventDefault(); // Prevent the default form submission

      // Collecting form data
      const username = document.getElementById('username').value;
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;

      // Creating the request body
      const requestBody = {
        username: username,
        email: email,
        password: password
      };

      // Sending the POST request
      fetch('http://localhost:8080/user/register', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(requestBody),
      })
      .then(response => {
        // Log the response for debugging
        console.log('Response:', response);

        // Check if the response is ok (status in the range 200-299)
        if (!response.ok) {
          return response.text().then(text => {
            throw new Error(text || 'Registration failed');
          });
        }
        // If the response is a string, return it directly
        return response.text();
      })
      .then(message => {
        console.log('Success:', message);
        // Show success message
        showNotification('Registration successful! Please log in.', 'bg-green-500 text-white');
        // Redirect to login page after a short delay
        setTimeout(() => {
          window.location.href = 'login.html';
        }, 2000);
      })
      .catch(error => {
        console.error('Error:', error);
        // Show error message
        showNotification('Registration failed. Please try again. ' + error.message, 'bg-red-500 text-white');
      });
    });

    function showNotification(message, bgClass) {
      const notification = document.getElementById('notification');
      notification.className = `mt-4 p-4 rounded-lg ${bgClass}`;
      notification.textContent = message;
      notification.classList.remove('hidden');

      // Auto-hide the notification after 3 seconds
      setTimeout(() => {
        notification.classList.add('hidden');
      }, 3000);
    }
  </script>

</body>
</html>
